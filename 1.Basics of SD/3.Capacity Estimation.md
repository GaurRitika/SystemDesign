# ⚙️ What Is Capacity Estimation?

📖 **Definition:**

> Capacity estimation (or capacity planning) is the process of **estimating the resources** (servers, storage, bandwidth, database capacity, etc.) a system will need to handle a **specific amount of load** while maintaining performance targets.

In short:
👉 It means **calculating how big your system needs to be** to handle your users *without breaking down.*

---

# 🎯 Why Capacity Estimation Matters

When you design a large-scale system (like YouTube, WhatsApp, or Netflix), the interviewer doesn’t just want you to design *features* — they want to see if you understand **scale**.

Because if your design can’t handle 10 million users, it’s *just a toy*, not a real system.

So, capacity estimation tells you:

* How many servers you’ll need
* How much network bandwidth
* How much database storage
* How much caching memory
* How to plan for peak traffic

---

# 🧩 Phase 1: Understand the Load

First, you must estimate **how much traffic your system will get**.

Example question:

> “Design Instagram Feed”
> “System should support 10 million daily active users (DAU).”

### Key Metrics You Estimate:

| Metric                  | Meaning                        | Example                      |
| ----------------------- | ------------------------------ | ---------------------------- |
| **QPS / RPS**           | Queries or requests per second | 10,000 requests per second   |
| **DAU / MAU**           | Daily / Monthly Active Users   | 10M DAU                      |
| **Peak QPS**            | Highest traffic moment         | 2x or 3x average QPS         |
| **Data Size**           | How much data you store        | 100 TB images, 5 TB metadata |
| **Read vs Write Ratio** | How many reads vs writes       | 80% reads, 20% writes        |

---

### 📘 Example: Suppose You’re Designing a Chat App

* Daily Active Users (DAU): **10 million**
* Each user sends **20 messages/day**
* Each message is about **200 bytes**

Now let’s compute:

**Total messages/day = 10M × 20 = 200M messages/day**
**Total data/day = 200M × 200 bytes = 40 GB/day**

Now you know:
🧠 “My system needs to handle **200 million writes/day** and store **40 GB of data per day.**”

---

# 🧩 Phase 2: Estimate Throughput (Requests per Second)

Now we convert daily numbers to **per-second load** (since servers handle requests per second).

We assume **traffic isn’t constant** — usually, **peak = 2× average load**.

So:

```
Requests per second (RPS) = Total requests per day / (24 × 3600)
```

For 200M messages/day:

```
Average RPS = 200M / 86400 ≈ 2,315 messages/sec
Peak RPS ≈ 2 × 2315 = 4630 messages/sec
```

So your system must handle **~4.6K writes per second**.

---

# 🧩 Phase 3: Estimate Storage

Now estimate how much **storage** your system needs over time.

For the chat app:

* Data per day: 40 GB/day
* For **1 year** (365 days): 40 × 365 = **14.6 TB/year**

If you want to store 5 years of messages → **≈ 73 TB.**

You might store recent chats in **primary DB**, and old data in **cold storage** (like S3).

---

# 🧩 Phase 4: Estimate Bandwidth

Now calculate **network bandwidth** — how much data is transmitted per second.

If each message = 200 bytes, and we send **4630 messages/sec** (peak):

```
Bandwidth = 4630 × 200 bytes = 926,000 bytes/sec ≈ 0.9 MB/sec (write)
```

Now account for **reads** (users receiving messages).
If each message is read by 2 users → 2× the bandwidth = ~1.8 MB/sec.

So, roughly:

* **Incoming traffic:** 0.9 MB/s
* **Outgoing traffic:** 1.8 MB/s
* **Total ≈ 2.7 MB/sec (≈ 22 Mbps)**

---

# 🧩 Phase 5: Estimate Server Requirements

Now you translate that into how many **servers** you’ll need.

Assume one app server can handle **500 requests/sec**.

We have **4630 peak RPS**, so:

```
4630 / 500 = 9.26 → round up → 10 servers
```

✅ So you’ll need around **10 app servers** to handle peak load comfortably.

To be safe (fault tolerance), always add 20–30% buffer:
→ Deploy **12 servers total**.

---

# 🧩 Phase 6: Estimate Database Capacity

Now calculate how much your DB must handle.

If each message = 200 bytes, and 4630 messages/sec →
**Database write load = 4630 × 200 = 0.926 MB/sec**

So per day:

```
0.926 MB × 86400 = 80 GB/day
```

You’d choose a database that:

* Can handle 5K writes/sec
* Can scale horizontally (like Cassandra, MongoDB, or sharded MySQL)

---

# 🧩 Phase 7: Estimate Cache Requirements

Suppose 80% of reads are cached (Redis/Memcached).

If daily reads = 10× writes = 2 billion reads/day,
and 80% are served from cache → 1.6B cache hits/day.

Each cache entry = 200 bytes × 1.6B = 320 GB.

So your cache must hold **~320 GB** of hot data (distributed over multiple nodes).

---

# 🧩 Phase 8: Plan for Future Growth

Good system designers always include **growth projection**:

* Assume **2× user growth per year**
* Assume **3× peak load increase**

So you design the system to scale to **15K RPS and 300 TB storage** without redesigning architecture.

---

# 🧭 Summary of All Phases

| Phase               | Goal                   | Example Output       |
| ------------------- | ---------------------- | -------------------- |
| 1️⃣ Understand Load | Users, actions, ratios | 10M DAU, 20 msgs/day |
| 2️⃣ Throughput      | RPS/QPS                | 4.6K msgs/sec        |
| 3️⃣ Storage         | Disk requirements      | 14.6 TB/year         |
| 4️⃣ Bandwidth       | Network load           | 2.7 MB/sec           |
| 5️⃣ Servers         | Compute power          | 12 app servers       |
| 6️⃣ DB              | Write/read load        | 5K writes/sec        |
| 7️⃣ Cache           | Hot data               | 320 GB               |
| 8️⃣ Growth          | Scalability buffer     | 3× load margin       |

---

# 💡 Real Interview Tip

Interviewers often test your *reasoning*, not your math.
They’ll say:

> “Design YouTube. How many servers will you need for 100M users?”

They don’t expect a perfect number — they want to see if you:

1. Break the problem into logical phases.
2. Make realistic assumptions.
3. Back your reasoning with approximate calculations.
4. Know which part of the system becomes a bottleneck (compute, bandwidth, storage, etc.)

---
See here :
<img width="1831" height="1068" alt="image" src="https://github.com/user-attachments/assets/73e69b20-bce2-4da7-9a1f-d7f239cf4303" />

# 🚀 TL;DR

> Capacity estimation = figuring out *how much load* your system must handle,
> and *how many resources* you’ll need to meet that load efficiently.





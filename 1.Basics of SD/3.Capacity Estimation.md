# âš™ï¸ What Is Capacity Estimation?

ğŸ“– **Definition:**

> Capacity estimation (or capacity planning) is the process of **estimating the resources** (servers, storage, bandwidth, database capacity, etc.) a system will need to handle a **specific amount of load** while maintaining performance targets.

In short:
ğŸ‘‰ It means **calculating how big your system needs to be** to handle your users *without breaking down.*

---

# ğŸ¯ Why Capacity Estimation Matters

When you design a large-scale system (like YouTube, WhatsApp, or Netflix), the interviewer doesnâ€™t just want you to design *features* â€” they want to see if you understand **scale**.

Because if your design canâ€™t handle 10 million users, itâ€™s *just a toy*, not a real system.

So, capacity estimation tells you:

* How many servers youâ€™ll need
* How much network bandwidth
* How much database storage
* How much caching memory
* How to plan for peak traffic

---

# ğŸ§© Phase 1: Understand the Load

First, you must estimate **how much traffic your system will get**.

Example question:

> â€œDesign Instagram Feedâ€
> â€œSystem should support 10 million daily active users (DAU).â€

### Key Metrics You Estimate:

| Metric                  | Meaning                        | Example                      |
| ----------------------- | ------------------------------ | ---------------------------- |
| **QPS / RPS**           | Queries or requests per second | 10,000 requests per second   |
| **DAU / MAU**           | Daily / Monthly Active Users   | 10M DAU                      |
| **Peak QPS**            | Highest traffic moment         | 2x or 3x average QPS         |
| **Data Size**           | How much data you store        | 100 TB images, 5 TB metadata |
| **Read vs Write Ratio** | How many reads vs writes       | 80% reads, 20% writes        |

---

### ğŸ“˜ Example: Suppose Youâ€™re Designing a Chat App

* Daily Active Users (DAU): **10 million**
* Each user sends **20 messages/day**
* Each message is about **200 bytes**

Now letâ€™s compute:

**Total messages/day = 10M Ã— 20 = 200M messages/day**
**Total data/day = 200M Ã— 200 bytes = 40 GB/day**

Now you know:
ğŸ§  â€œMy system needs to handle **200 million writes/day** and store **40 GB of data per day.**â€

---

# ğŸ§© Phase 2: Estimate Throughput (Requests per Second)

Now we convert daily numbers to **per-second load** (since servers handle requests per second).

We assume **traffic isnâ€™t constant** â€” usually, **peak = 2Ã— average load**.

So:

```
Requests per second (RPS) = Total requests per day / (24 Ã— 3600)
```

For 200M messages/day:

```
Average RPS = 200M / 86400 â‰ˆ 2,315 messages/sec
Peak RPS â‰ˆ 2 Ã— 2315 = 4630 messages/sec
```

So your system must handle **~4.6K writes per second**.

---

# ğŸ§© Phase 3: Estimate Storage

Now estimate how much **storage** your system needs over time.

For the chat app:

* Data per day: 40 GB/day
* For **1 year** (365 days): 40 Ã— 365 = **14.6 TB/year**

If you want to store 5 years of messages â†’ **â‰ˆ 73 TB.**

You might store recent chats in **primary DB**, and old data in **cold storage** (like S3).

---

# ğŸ§© Phase 4: Estimate Bandwidth

Now calculate **network bandwidth** â€” how much data is transmitted per second.

If each message = 200 bytes, and we send **4630 messages/sec** (peak):

```
Bandwidth = 4630 Ã— 200 bytes = 926,000 bytes/sec â‰ˆ 0.9 MB/sec (write)
```

Now account for **reads** (users receiving messages).
If each message is read by 2 users â†’ 2Ã— the bandwidth = ~1.8 MB/sec.

So, roughly:

* **Incoming traffic:** 0.9 MB/s
* **Outgoing traffic:** 1.8 MB/s
* **Total â‰ˆ 2.7 MB/sec (â‰ˆ 22 Mbps)**

---

# ğŸ§© Phase 5: Estimate Server Requirements

Now you translate that into how many **servers** youâ€™ll need.

Assume one app server can handle **500 requests/sec**.

We have **4630 peak RPS**, so:

```
4630 / 500 = 9.26 â†’ round up â†’ 10 servers
```

âœ… So youâ€™ll need around **10 app servers** to handle peak load comfortably.

To be safe (fault tolerance), always add 20â€“30% buffer:
â†’ Deploy **12 servers total**.

---

# ğŸ§© Phase 6: Estimate Database Capacity

Now calculate how much your DB must handle.

If each message = 200 bytes, and 4630 messages/sec â†’
**Database write load = 4630 Ã— 200 = 0.926 MB/sec**

So per day:

```
0.926 MB Ã— 86400 = 80 GB/day
```

Youâ€™d choose a database that:

* Can handle 5K writes/sec
* Can scale horizontally (like Cassandra, MongoDB, or sharded MySQL)

---

# ğŸ§© Phase 7: Estimate Cache Requirements

Suppose 80% of reads are cached (Redis/Memcached).

If daily reads = 10Ã— writes = 2 billion reads/day,
and 80% are served from cache â†’ 1.6B cache hits/day.

Each cache entry = 200 bytes Ã— 1.6B = 320 GB.

So your cache must hold **~320 GB** of hot data (distributed over multiple nodes).

---

# ğŸ§© Phase 8: Plan for Future Growth

Good system designers always include **growth projection**:

* Assume **2Ã— user growth per year**
* Assume **3Ã— peak load increase**

So you design the system to scale to **15K RPS and 300 TB storage** without redesigning architecture.

---

# ğŸ§­ Summary of All Phases

| Phase               | Goal                   | Example Output       |
| ------------------- | ---------------------- | -------------------- |
| 1ï¸âƒ£ Understand Load | Users, actions, ratios | 10M DAU, 20 msgs/day |
| 2ï¸âƒ£ Throughput      | RPS/QPS                | 4.6K msgs/sec        |
| 3ï¸âƒ£ Storage         | Disk requirements      | 14.6 TB/year         |
| 4ï¸âƒ£ Bandwidth       | Network load           | 2.7 MB/sec           |
| 5ï¸âƒ£ Servers         | Compute power          | 12 app servers       |
| 6ï¸âƒ£ DB              | Write/read load        | 5K writes/sec        |
| 7ï¸âƒ£ Cache           | Hot data               | 320 GB               |
| 8ï¸âƒ£ Growth          | Scalability buffer     | 3Ã— load margin       |

---

# ğŸ’¡ Real Interview Tip

Interviewers often test your *reasoning*, not your math.
Theyâ€™ll say:

> â€œDesign YouTube. How many servers will you need for 100M users?â€

They donâ€™t expect a perfect number â€” they want to see if you:

1. Break the problem into logical phases.
2. Make realistic assumptions.
3. Back your reasoning with approximate calculations.
4. Know which part of the system becomes a bottleneck (compute, bandwidth, storage, etc.)

---
See here :
<img width="1831" height="1068" alt="image" src="https://github.com/user-attachments/assets/73e69b20-bce2-4da7-9a1f-d7f239cf4303" />

# ğŸš€ TL;DR

> Capacity estimation = figuring out *how much load* your system must handle,
> and *how many resources* youâ€™ll need to meet that load efficiently.





#  Step 1: What Is a Transaction?

A **transaction** is a logical unit of work that consists of one or more operations that must **succeed or fail together**.

ðŸ‘‰ Example:

```sql
BEGIN TRANSACTION;
UPDATE accounts SET balance = balance - 100 WHERE id = 1;
UPDATE accounts SET balance = balance + 100 WHERE id = 2;
COMMIT;
```

This ensures:

* If **both succeed â†’ commit**.
* If **any fails â†’ rollback**.

---

#  Step 2: The "I" in ACID

ACID = Atomicity, Consistency, Isolation, Durability

âž¡ï¸ **Isolation** means:

> Transactions executing concurrently should **not interfere** with each otherâ€™s data in a way that produces incorrect results.

In simpler words:

> â€œEach transaction should behave as if itâ€™s running alone â€” even if hundreds of others are happening simultaneously.â€

---

#  Step 3: The Problem â€” Concurrent Transactions

Letâ€™s say:

* T1 â†’ reads account balance = â‚¹1000
* T2 â†’ deposits â‚¹500 at the same time
* T1 â†’ deducts â‚¹200

Depending on how the database **isolates** these transactions, T1 and T2 may:

* See each otherâ€™s changes,
* Overwrite each other,
* Or remain unaware.

Hence â†’ different isolation levels exist.

---

#  Step 4: Anomalies That Can Occur

Before we define isolation levels, we must understand **what they prevent**.

| Phenomenon              | Description                                             | Example                                                                  |
| ----------------------- | ------------------------------------------------------- | ------------------------------------------------------------------------ |
| **Dirty Read**          | Reading data written by another uncommitted transaction | T1 updates balance but hasnâ€™t committed yet; T2 reads it.                |
| **Non-repeatable Read** | Reading same row twice gives different results          | T1 reads balance â‚¹1000, T2 commits update â‚¹1500, T1 reads again â†’ â‚¹1500. |
| **Phantom Read**        | A new row appears in a repeated query                   | T1 counts users = 5, T2 adds a new user, T1 counts again â†’ 6.            |
| **Lost Update**         | Two transactions overwrite each otherâ€™s changes         | T1 and T2 both deduct â‚¹100, final balance reflects only one.             |

---

#  Step 5: SQL Transaction Isolation Levels

SQL defines **4 standard isolation levels**.
Each one offers stronger isolation â€” but slower performance.

Letâ€™s go from weakest â†’ strongest ðŸ‘‡

---

## 1ï¸âƒ£ **READ UNCOMMITTED** (Lowest Isolation)

> Transactions can read **uncommitted (dirty)** data from others.

 Example:

* T1: `UPDATE users SET balance = 0;` (not committed)
* T2: `SELECT balance FROM users;` â†’ sees 0 even though T1 hasnâ€™t committed.

 Problems:

* Dirty reads
* Non-repeatable reads
* Phantom reads

 Fastest, but unsafe.

Used in: Rare cases like analytics where accuracy < speed.

---

## 2ï¸âƒ£ **READ COMMITTED** (Most Common Default)

> Transaction can **only read committed data**.

 Example:

* T1â€™s updates are invisible until it commits.
* T2 always sees only committed values.

 Still possible:

* Non-repeatable reads (data can change between two reads)
* Phantom reads

 Prevents dirty reads
 Good balance between correctness and performance.

Used by:

* PostgreSQL (default)
* Oracle (default)

---

## 3ï¸âƒ£ **REPEATABLE READ**

> Ensures that if a transaction reads a row once, all future reads of that row return the same data (until transaction ends).

 Example:

* T1 reads balance â‚¹1000.
* T2 updates to â‚¹1200 and commits.
* T1 reads again â†’ still sees â‚¹1000 (repeatable).

âš ï¸ Phantom rows (new inserts that match WHERE clause) can still appear.

âœ… Prevents:

* Dirty reads
* Non-repeatable reads

Used by:

* MySQL InnoDB (default)

---

## 4ï¸âƒ£ **SERIALIZABLE** (Highest Isolation)

> Transactions behave as if theyâ€™re executed **one after another (serially)** â€” even though they run concurrently.

 Example:

* T1 and T2 both trying to withdraw money will be **ordered by the DB** so results are same as serial execution.

âœ… Prevents all anomalies:

* Dirty read âŒ
* Non-repeatable read âŒ
* Phantom read âŒ

âŒ But very slow â€” locks or aborts many transactions.

Used in: Financial/banking systems where correctness > performance.
---
#  Step 8: Real-World Example â€” Bank Account Transfers

Two users transferring money at the same time:

| Isolation Level  | Possible Problem                      |
| ---------------- | ------------------------------------- |
| Read Uncommitted | See uncommitted balances              |
| Read Committed   | One might see outdated balance        |
| Repeatable Read  | Each sees consistent snapshot         |
| Serializable     | Fully correct â€” but slower throughput |

---
